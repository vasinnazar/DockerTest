/**
 * @license Copyright (c) 2014-2017, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2014-11-13, 2015-04-06
 * see https://github.com/tonytomov/jqGrid/issues/650 for more details
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.contextmenu-ui","free-jqgrid/grid.base"],function(c){return b(c,a,a.document)}):"object"==typeof module&&module.exports?module.exports=function(a,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(a||window)),require("./jquery.contextmenu-ui"),require("free-jqgrid/grid.base"),b(c,a,a.document),c}:b(jQuery,a,a.document)}("undefined"!=typeof window?window:this,function(a,b,c){"use strict";a.jgrid=a.jgrid||{},a.extend(a.jgrid,{showHideColumnMenu:{adjustGridWidth:!0,viewHideDlgColumnsAsDisabled:!1,allowHideInernalColumns:!1,shrink:!1,menuStyle:{float:"left"},modifyMenuItem:function(b,c,d){if(a.inArray(c.name,["rn","subgrid","cb"])>=0)return void(d.allowHideInernalColumns||b.hide());c.hidedlg&&(d.viewHideDlgColumnsAsDisabled?b.addClass("ui-state-disabled"):b.hide())}}}),a.jgrid.extend({showHideColumnMenu:function(d){var e=a.extend(!0,{},a.jgrid.showHideColumnMenu,d),f=null!=a.ui&&"string"==typeof a.ui.version?/^([0-9]+)\.([0-9]+)\.([0-9]+)$/.exec(a.ui.version):[],g=null!=f&&4===f.length&&"1"===f[1]&&f[2]<11;return this.each(function(){var d=a(this),f=function(){a(this.grid.hDiv).find(".ui-jqgrid-labels").contextmenu(function(f){var h,i,j,k,l,m,n,o=d.jqGrid("getGridParam"),p=o.colModel,q=o.colNames,r=p.length,s=o.groupHeader,t={},u={},v=a("<ul class='ui-jqgrid-showHideColumnMenu'></ul>");for(h=0;h<r;h++)t[p[h].name]=h;if(null!=s&&null!=s.groupHeaders)for(k=0,m=s.groupHeaders.length;k<m;k++)for(n=s.groupHeaders[k],l=0;l<n.numberOfColumns;l++)h=t[n.startColumnName]+l,i=p[h],u[h]=a.isFunction(e.buildItemText)?e.buildItemText.call(d[0],{iCol:h,cm:i,cmName:i.name,colName:q[h],groupTitleText:n.titleText}):a.jgrid.stripHtml(n.titleText)+": "+a.jgrid.stripHtml(""===q[h]?i.name:q[h]);for(h=0;h<r;h++)void 0===u[h]&&(i=p[h],u[h]=a.isFunction(e.buildItemText)?e.buildItemText.call(d[0],{iCol:h,cm:i,cmName:i.name,colName:q[h],groupTitleText:null}):a.jgrid.stripHtml(q[h]));for(h=0;h<r;h++)i=p[h],j=a("<li></li>").data("iCol",h).html(u[h]),e.modifyMenuItem.call(d[0],j,i,e),j.prepend(i.hidden?e.checkboxUnChecked:e.checkboxChecked),g&&j.wrapInner("<a></a>"),j.appendTo(v);return v.css(e.menuStyle),a("ul.ui-jqgrid-showHideColumnMenu").menu("destroy").remove(),v.appendTo("body").menu({select:function(b,c){var f=parseInt(c.item.data("iCol"),10),g=c.item.find(e.checkboxSelector),h=p[f],i=e.isChecked.call(d[0],g,b,h);!isNaN(f)&&f>=0&&null!=h&&g.length>0&&(i?(e.toUnCheck.call(d[0],g,b,h),d.jqGrid("hideCol",h.name)):(e.toCheck.call(d[0],g,b,h),d.jqGrid("showCol",h.name)),a(this).parent().css("zoom",1),v.menu("focus",b,c.item))},create:function(){var a=v.height(),d=b.innerHeight||c.documentElement.clientHeight;a>d&&v.height(d).css("overflow-y","scroll")}}).mouseleave(function(){a(this).menu("destroy").remove()}).position({of:a(f.target),my:"left top",at:"right center",collision:"flipfit flipfit"}),!1})};e=a.extend(!0,"fontAwesome"===this.p.iconSet||"fontAwesome"===e.iconSet?{checkboxChecked:'<i class="fa fa-check-square-o fa-fw fa-lg"></i>&nbsp;',checkboxUnChecked:'<i class="fa fa-square-o fa-fw fa-lg"></i>&nbsp;',checkboxSelector:"i.fa",isChecked:function(a){return a.hasClass("fa-check-square-o")},toCheck:function(a){a.removeClass("fa-square-o").addClass("fa-check-square-o")},toUnCheck:function(a){a.removeClass("fa-check-square-o").addClass("fa-square-o")}}:{checkboxChecked:'<input disabled="disabled" checked="checked" type="checkbox"/>',checkboxUnChecked:'<input disabled="disabled" type="checkbox"/>',checkboxSelector:"input[type=checkbox]",isChecked:function(a){return a.is(":checked")},toCheck:function(a){a.prop("checked",!0)},toUnCheck:function(a){a.prop("checked",!1)}},e),f.call(this),d.bind("jqGridAfterSetGroupHeaders",function(){f.call(this)})})}})});
//# sourceMappingURL=jquery.jqgrid.showhidecolumnmenu.js.map