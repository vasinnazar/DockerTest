!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a)}):"object"==typeof module&&module.exports?module.exports=function(a,c){return a||(a=window),void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(a)),b(c,a)}:b(jQuery,a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var c=this.removeWhite(a),d=this.toObj(c),e=this.toJson(d,a.nodeName,"\t");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c,d=function(a,b,c){var e,f,g,h,i,j="";if(a instanceof Array)if(0===a.length)j+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(e=0,f=a.length;e<f;e+=1)g=c+d(a[e],b,c+"\t")+"\n",j+=g;else if("object"==typeof a){h=!1,j+=c+"<"+b;for(i in a)a.hasOwnProperty(i)&&("@"===i.charAt(0)?j+=" "+i.substr(1)+'="'+a[i].toString()+'"':h=!0);if(j+=h?">":"/>",h){for(i in a)a.hasOwnProperty(i)&&("#text"===i?j+=a[i]:"#cdata"===i?j+="<![CDATA["+a[i]+"]]>":"@"!==i.charAt(0)&&(j+=d(a[i],i,c+"\t")));j+=("\n"===j.charAt(j.length-1)?c:"")+"</"+b+">"}}else"function"==typeof a?j+=c+"<"+b+"><![CDATA["+a+"]]></"+b+">":(void 0===a&&(a=""),j+='""'===a.toString()||0===a.toString().length?c+"<"+b+">__EMPTY_STRING_</"+b+">":c+"<"+b+">"+a.toString()+"</"+b+">");return j},e="";for(c in a)a.hasOwnProperty(c)&&(e+=d(a[c],c,""));return b?e.replace(/\t/g,b):e.replace(/\t|\n/g,"")},toObj:function(b){var c,d,e={},f=/function/i,g=0,h=0,i=!1;if(1===b.nodeType){if(b.attributes.length)for(c=0;c<b.attributes.length;c+=1)e["@"+b.attributes[c].nodeName]=(b.attributes[c].nodeValue||"").toString();if(b.firstChild){for(d=b.firstChild;d;d=d.nextSibling)1===d.nodeType?i=!0:3===d.nodeType&&d.nodeValue.match(/[^ \f\n\r\t\v]/)?g+=1:4===d.nodeType&&(h+=1);if(i)if(g<2&&h<2)for(this.removeWhite(b),d=b.firstChild;d;d=d.nextSibling)3===d.nodeType?e["#text"]=this.escape(d.nodeValue):4===d.nodeType?f.test(d.nodeValue)?e[d.nodeName]=[e[d.nodeName],d.nodeValue]:e["#cdata"]=this.escape(d.nodeValue):e[d.nodeName]?e[d.nodeName]instanceof Array?e[d.nodeName][e[d.nodeName].length]=this.toObj(d):e[d.nodeName]=[e[d.nodeName],this.toObj(d)]:e[d.nodeName]=this.toObj(d);else b.attributes.length?e["#text"]=this.escape(this.innerXml(b)):e=this.escape(this.innerXml(b));else if(g)b.attributes.length?e["#text"]=this.escape(this.innerXml(b)):(e=this.escape(this.innerXml(b)),"__EMPTY_ARRAY_"===e?e="[]":"__EMPTY_STRING_"===e&&(e=""));else if(h)if(h>1)e=this.escape(this.innerXml(b));else for(d=b.firstChild;d;d=d.nextSibling){if(f.test(b.firstChild.nodeValue)){e=b.firstChild.nodeValue;break}e["#cdata"]=this.escape(d.nodeValue)}}b.attributes.length||b.firstChild||(e=null)}else 9===b.nodeType?e=this.toObj(b.documentElement):(null!=a.jgrid&&null!=a.jgrid.defaults&&a.isFunction(a.jgrid.defaults.fatalError)?a.jgrid.defaults.fatalError:alert)("unhandled node type: "+b.nodeType);return e},toJson:function(a,b,c,d){void 0===d&&(d=!0);var e,f,g,h=b?'"'+b+'"':"",i="\t",j="\n",k=[],l=[];if(d||(i="",j=""),"[]"===a)h+=b?":[]":"[]";else if(a instanceof Array){for(f=0,e=a.length;f<e;f+=1)k[f]=this.toJson(a[f],"",c+i,d);h+=(b?":[":"[")+(k.length>1?j+c+i+k.join(","+j+c+i)+j+c:k.join(""))+"]"}else if(null===a)h+=(b&&":")+"null";else if("object"==typeof a){for(g in a)a.hasOwnProperty(g)&&(l[l.length]=this.toJson(a[g],g,c+i,d));h+=(b?":{":"{")+(l.length>1?j+c+i+l.join(","+j+c+i)+j+c:l.join(""))+"}"}else h+="string"==typeof a?(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(b&&":")+a.toString();return h},innerXml:function(a){var b,c="",d=function(a){var b,c,e="";if(1===a.nodeType){for(e+="<"+a.nodeName,b=0;b<a.attributes.length;b+=1)e+=" "+a.attributes[b].nodeName+'="'+(a.attributes[b].nodeValue||"").toString()+'"';if(a.firstChild){for(e+=">",c=a.firstChild;c;c=c.nextSibling)e+=d(c);e+="</"+a.nodeName+">"}else e+="/>"}else 3===a.nodeType?e+=a.nodeValue:4===a.nodeType&&(e+="<![CDATA["+a.nodeValue+"]]>");return e};if(a.hasOwnProperty("innerHTML"))c=a.innerHTML;else for(b=a.firstChild;b;b=b.nextSibling)c+=d(b);return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();for(var b,c=a.firstChild;c;)3===c.nodeType?c.nodeValue.match(/[^ \f\n\r\t\v]/)?c=c.nextSibling:(b=c.nextSibling,a.removeChild(c),c=b):1===c.nodeType?(this.removeWhite(c),c=c.nextSibling):c=c.nextSibling;return a}};return b.xmlJsonClass=c,c});
//# sourceMappingURL=jsonxml.js.map